{
  "info": {
    "name": "Admin Project Endpoints",
    "description": "Collection for admin project management endpoints including project listing with filters and detailed project information",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "item": [
    {
      "name": "Admin Project List",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{admin_token}}",
            "type": "text",
            "description": "Admin JWT token"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/v1/admin/projects/?page=1&page_size=20&ordering=-updated_at",
          "host": ["{{base_url}}"],
          "path": ["api", "v1", "admin", "projects", ""],
          "query": [
            {
              "key": "page",
              "value": "1",
              "description": "Page number (default: 1)"
            },
            {
              "key": "page_size",
              "value": "20",
              "description": "Items per page (default: 20, max: 100)"
            },
            {
              "key": "ordering",
              "value": "-updated_at",
              "description": "Sort order: name, -name, created_at, -created_at, updated_at, -updated_at, state_abbr, -state_abbr"
            },
            {
              "key": "assignment",
              "value": "",
              "description": "Filter by client ID (assignment)",
              "disabled": true
            },
            {
              "key": "state",
              "value": "",
              "description": "Filter by state abbreviation (e.g., 'CA') or full name (e.g., 'California')",
              "disabled": true
            },
            {
              "key": "type",
              "value": "",
              "description": "Filter by project type (e.g., 'Test-Maps')",
              "disabled": true
            },
            {
              "key": "is_public",
              "value": "",
              "description": "Filter by public status: true/false",
              "disabled": true
            },
            {
              "key": "is_active",
              "value": "",
              "description": "Filter by active status: true/false",
              "disabled": true
            }
          ]
        },
        "description": "Get paginated list of projects with filtering capabilities for admin dashboard.\n\nFilters:\n- assignment: Filter by client ID\n- state: Filter by state (abbreviation or full name)\n- type: Filter by project type\n- is_public: Filter by public status\n- is_active: Filter by active status\n\nReturns project cards with essential information including assigned clients, layer counts, and feature counts."
      },
      "response": [
        {
          "name": "Success Response",
          "originalRequest": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/admin/projects/?page=1&page_size=10",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "admin", "projects", ""],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "page_size",
                  "value": "10"
                }
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "cookie": [],
          "body": "{\n  \"results\": [\n    {\n      \"id\": 1,\n      \"name\": \"Sample Project\",\n      \"state_abbr\": \"CA\",\n      \"state_name\": \"California\",\n      \"project_type\": \"Test-Maps\",\n      \"is_public\": false,\n      \"is_active\": true,\n      \"created_at\": \"2024-01-15T10:30:00Z\",\n      \"updated_at\": \"2024-01-20T14:45:00Z\",\n      \"assigned_clients\": [\n        {\n          \"id\": 1,\n          \"name\": \"Client A\"\n        }\n      ],\n      \"layer_groups_count\": 3,\n      \"total_layers_count\": 8,\n      \"total_features_count\": 1250\n    }\n  ],\n  \"pagination\": {\n    \"total_count\": 45,\n    \"page\": 1,\n    \"page_size\": 10,\n    \"total_pages\": 5,\n    \"has_next\": true,\n    \"has_previous\": false\n  }\n}"
        }
      ]
    },
    {
      "name": "Admin Project List - Filtered by State",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{admin_token}}",
            "type": "text"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/v1/admin/projects/?state=California&page_size=10",
          "host": ["{{base_url}}"],
          "path": ["api", "v1", "admin", "projects", ""],
          "query": [
            {
              "key": "state",
              "value": "California"
            },
            {
              "key": "page_size",
              "value": "10"
            }
          ]
        },
        "description": "Example of filtering projects by state (supports both abbreviation like 'CA' and full name like 'California')"
      }
    },
    {
      "name": "Admin Project List - Filtered by Assignment",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{admin_token}}",
            "type": "text"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/v1/admin/projects/?assignment=1&page_size=10",
          "host": ["{{base_url}}"],
          "path": ["api", "v1", "admin", "projects", ""],
          "query": [
            {
              "key": "assignment",
              "value": "1",
              "description": "Client ID"
            },
            {
              "key": "page_size",
              "value": "10"
            }
          ]
        },
        "description": "Example of filtering projects by client assignment (use client ID)"
      }
    },
    {
      "name": "Admin Project List - Filtered by Type",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{admin_token}}",
            "type": "text"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/v1/admin/projects/?type=Test-Maps&is_public=false",
          "host": ["{{base_url}}"],
          "path": ["api", "v1", "admin", "projects", ""],
          "query": [
            {
              "key": "type",
              "value": "Test-Maps"
            },
            {
              "key": "is_public",
              "value": "false"
            }
          ]
        },
        "description": "Example of filtering projects by type and public status"
      }
    },
    {
      "name": "Admin Project Detail",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{admin_token}}",
            "type": "text",
            "description": "Admin JWT token"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/v1/admin/projects/{{project_id}}/",
          "host": ["{{base_url}}"],
          "path": ["api", "v1", "admin", "projects", "{{project_id}}", ""]
        },
        "description": "Get detailed project information for admin including:\n- Complete project information (center lat/lng, zoom levels, etc.)\n- Creator details\n- Detailed client assignments with users\n- Complete layer groups and layers hierarchy\n- All functions used across project layers\n- Comprehensive project statistics"
      },
      "response": [
        {
          "name": "Success Response",
          "originalRequest": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/admin/projects/1/",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "admin", "projects", "1", ""]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "cookie": [],
          "body": "{\n  \"id\": 1,\n  \"name\": \"Sample Project\",\n  \"description\": \"A detailed project description\",\n  \"state_abbr\": \"CA\",\n  \"state_name\": \"California\",\n  \"project_type\": \"Test-Maps\",\n  \"is_public\": false,\n  \"is_active\": true,\n  \"default_center_lat\": 37.7749,\n  \"default_center_lng\": -122.4194,\n  \"default_zoom_level\": 10,\n  \"map_controls\": {},\n  \"map_options\": {},\n  \"max_zoom\": 18,\n  \"min_zoom\": 1,\n  \"created_at\": \"2024-01-15T10:30:00Z\",\n  \"updated_at\": \"2024-01-20T14:45:00Z\",\n  \"public_access_token\": null,\n  \"creator_info\": {\n    \"id\": 1,\n    \"username\": \"admin_user\",\n    \"full_name\": \"Admin User\",\n    \"email\": \"admin@example.com\"\n  },\n  \"assigned_clients\": [\n    {\n      \"client_id\": 1,\n      \"client_name\": \"Client A\",\n      \"access_level\": \"view\",\n      \"unique_link\": \"abc123def456\",\n      \"created_at\": \"2024-01-15T11:00:00Z\",\n      \"expires_at\": null,\n      \"last_accessed\": \"2024-01-19T09:30:00Z\",\n      \"users\": [\n        {\n          \"id\": 2,\n          \"username\": \"client_user1\",\n          \"full_name\": \"Client User 1\",\n          \"email\": \"user1@clienta.com\",\n          \"client_role\": \"viewer\"\n        }\n      ]\n    }\n  ],\n  \"layer_groups\": [\n    {\n      \"id\": 1,\n      \"name\": \"Base Layers\",\n      \"display_order\": 0,\n      \"is_visible_by_default\": true,\n      \"is_expanded_by_default\": true,\n      \"created_at\": \"2024-01-15T10:35:00Z\",\n      \"updated_at\": \"2024-01-15T10:35:00Z\",\n      \"layers\": [\n        {\n          \"id\": 1,\n          \"name\": \"Points of Interest\",\n          \"description\": \"Important locations\",\n          \"layer_type\": \"Point Layer\",\n          \"feature_count\": 150,\n          \"is_visible_by_default\": true,\n          \"is_public\": true,\n          \"created_at\": \"2024-01-15T10:40:00Z\",\n          \"updated_at\": \"2024-01-18T16:20:00Z\",\n          \"last_data_update\": \"2024-01-18T16:20:00Z\",\n          \"functions\": [\n            {\n              \"id\": 1,\n              \"name\": \"Point Clustering\",\n              \"function_type\": \"clustering\",\n              \"enabled\": true,\n              \"priority\": 1\n            }\n          ]\n        }\n      ]\n    }\n  ],\n  \"project_functions\": [\n    {\n      \"id\": 1,\n      \"name\": \"Point Clustering\",\n      \"description\": \"Clusters nearby points for better visualization\",\n      \"function_type\": \"clustering\",\n      \"is_system\": true,\n      \"created_at\": \"2024-01-01T00:00:00Z\"\n    }\n  ],\n  \"stats\": {\n    \"layer_groups_count\": 3,\n    \"total_layers\": 8,\n    \"public_layers\": 5,\n    \"total_features\": 1250,\n    \"total_functions\": 12,\n    \"active_functions\": 10\n  }\n}"
        },
        {
          "name": "Project Not Found",
          "originalRequest": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/admin/projects/999/",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "admin", "projects", "999", ""]
            }
          },
          "status": "Not Found",
          "code": 404,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "cookie": [],
          "body": "{\n  \"error\": \"Project not found\"\n}"
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "description": "Base URL of the API server"
    },
    {
      "key": "admin_token",
      "value": "",
      "description": "JWT token for admin authentication"
    },
    {
      "key": "project_id",
      "value": "1",
      "description": "Project ID for detail endpoint"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{admin_token}}",
        "type": "string"
      }
    ]
  }
}